# 토브 홈페이지 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트 명

- **프로젝트명**: 토브(TOV) 홈페이지 구축
- **시스템명**: TOV Web Platform

### 1.2 프로젝트 목적

- 사단법인 토브협회의 공식 홈페이지 구축
- 비영리 재정 운영 관련 정보 제공 및 교육 플랫폼 구축
- 종교인 및 비영리단체를 위한 재정 투명성 정보 제공
- 온라인 상담 서비스 및 후원 관리 시스템 구축

### 1.3 주요 이해관계자

- **내부**: 토브협회 운영진, 관리자, 상담사
- **외부**: 종교단체 관계자, 비영리단체 관계자, 일반 후원자, 방문자

## 2. 시스템 아키텍처

### 2.1 기술 스택

- **Frontend**: Next.js 14+ (App Router)
- **Backend**: Node.js, Express.js
- **Database**: MySQL 8.0+
- **Authentication**: JWT (Access/Refresh Token)
- **Deployment**: Docker, Kubernetes
- **CDN**: CloudFront
- **Storage**: AWS S3

### 2.2 주요 통합 시스템

- **소셜 로그인**: Google, Naver, Kakao, Apple
- **결제 시스템**: 후원금 결제 모듈
- **이메일/SMS**: 알림 및 인증 서비스
- **메일링 서비스**: 스티비(Stibee) 연동

## 3. 기능 요구사항

### 3.1 사용자 관리 (User Management)

#### 3.1.1 회원 가입

- **일반 회원가입**
  - 이메일 인증
  - 비밀번호 정책 (8자 이상, 영문/숫자/특수문자 조합)
  - 개인정보 수집 동의
  - 이용약관 동의
- **소셜 로그인**
  - Google, Naver, Kakao, Apple 계정 연동
  - 최초 로그인 시 추가 정보 수집
  - 기존 계정과 연동 기능

#### 3.1.2 로그인/보안

- **JWT 기반 인증**
  - Access Token (15분)
  - Refresh Token (7일)
  - 자동 로그인 옵션
- **2단계 인증 (Optional)**
  - TOTP 기반 인증
  - 복구 코드 제공
- **보안 기능**
  - 로그인 시도 제한 (5회 실패 시 15분 차단)
  - 비정상 접근 감지
  - 디바이스 관리

#### 3.1.3 프로필 관리

- 기본 정보 수정
- 교회 정보 입력 (선택)
- 뉴스레터 구독 설정
- 마케팅 수신 동의 관리

### 3.2 콘텐츠 관리 시스템 (CMS)

#### 3.2.1 게시판 시스템

- **게시판 종류**
  - 공지사항
  - 토브소식
  - 정기간행물
  - 언론보도
  - 자료실
- **기능**
  - WYSIWYG 에디터
  - 파일 첨부 (최대 10MB/파일, 총 50MB)
  - 이미지 자동 최적화
  - 검색 기능 (제목, 내용, 작성자)
  - 페이지네이션
  - 조회수 관리

#### 3.2.2 메인 페이지 관리

- **배너 관리**
  - 최대 7개 배너 등록
  - 노출 기간 설정
  - 순서 변경 (드래그 앤 드롭)
- **퀵링크 관리**
  - 아이콘 선택
  - 링크 URL 설정
  - 노출 순서 관리

### 3.3 상담 시스템

#### 3.3.1 온라인 상담 신청

- 상담 유형 선택
- 희망 일시 선택
- 상담 내용 작성
- 첨부 파일 업로드
- 개인정보 수집 동의

#### 3.3.2 상담 관리 (관리자)

- 상담 신청 목록 조회
- 담당자 배정
- 상담 진행 상태 관리
- 상담 결과 기록
- 통계 및 리포트

### 3.4 후원 관리 시스템

#### 3.4.1 후원 신청

- **후원 유형**
  - 정기 후원
  - 일시 후원
- **결제 방법**
  - 신용카드
  - 계좌이체
  - 가상계좌
- **기부금 영수증**
  - 발급 신청
  - 발급 이력 관리

#### 3.4.2 후원자 관리

- 후원 내역 조회
- 기부금 영수증 다운로드
- 후원 중단/재개
- 후원 금액 변경

#### 3.4.3 재정 보고

- 월별/연별 재정 보고서
- 수입/지출 내역 공개
- 투명성 보고서

### 3.5 교육 및 자료실

#### 3.5.1 교육 콘텐츠 관리

- 재정 운영 교육 자료
- 동영상 강의 링크 (YouTube 연동)
- 교육 일정 관리
- 수료증 발급 (향후)

#### 3.5.2 자료실

- 카테고리별 자료 분류
  - 종교인 소득 관련
  - 비영리 재정 운영
  - 결산 공시
  - 관계 법령
- 다운로드 권한 관리
- 자료 검색 기능
- 인기 자료 통계

### 3.6 관리자 시스템

#### 3.6.1 대시보드

- 방문자 통계
- 회원 가입 현황
- 상담 신청 현황
- 후원 현황
- 콘텐츠 통계

#### 3.6.2 회원 관리

- 회원 목록 조회/검색
- 회원 상태 관리 (활성/비활성/정지)
- 회원 정보 수정
- 회원 활동 로그

#### 3.6.3 콘텐츠 관리

- 게시물 관리
- 카테고리 관리
- 파일 관리
- 메뉴 관리
- 팝업 관리

#### 3.6.4 시스템 설정

- 사이트 기본 정보
- 이메일/SMS 템플릿
- API 키 관리
- 백업/복원

## 4. 비기능 요구사항

### 4.1 성능

- 페이지 로드 시간: 3초 이내
- 동시 접속자: 1,000명 이상
- API 응답 시간: 500ms 이내
- 이미지 최적화: WebP 자동 변환

### 4.2 보안

- SSL/TLS 인증서 적용
- XSS, CSRF, SQL Injection 방어
- 개인정보 암호화 (AES-256)
- 정기 보안 점검

### 4.3 접근성

- KWCAG 2.1 준수
- 키보드 네비게이션 지원
- 스크린 리더 호환
- 고대비 모드 지원

### 4.4 호환성

- 브라우저: Chrome, Safari, Firefox, Edge (최신 2개 버전)
- 디바이스: Desktop, Tablet, Mobile
- 운영체제: Windows, macOS, iOS, Android

### 4.5 확장성

- 마이크로서비스 아키텍처
- 수평적 확장 가능
- 캐싱 전략 (Redis)
- CDN 활용

## 5. 데이터베이스 설계

### 5.1 주요 엔티티

- **사용자 관리**: users, user_profiles, social_accounts
- **콘텐츠**: posts, categories, attachments
- **상담**: consultations
- **후원**: sponsors, donations, financial_reports
- **인증**: refresh_tokens, jwt_blacklist, verification_codes

### 5.2 데이터 보관 정책

- 개인정보: 회원 탈퇴 후 30일 보관 후 삭제
- 로그 데이터: 1년 보관
- 백업: 일일 백업, 30일 보관

## 6. 외부 연동

### 6.1 소셜 로그인

- Google OAuth 2.0
- Naver Login API
- Kakao Login API
- Apple Sign In

### 6.2 결제 시스템

- PG사 연동 (아임포트, 토스페이먼츠 등)
- 정기결제 API
- 결제 취소/환불 API

### 6.3 알림 서비스

- 이메일: SendGrid, AWS SES
- SMS: 알리고, 뿌리오 등
- 카카오 알림톡

### 6.4 분석 도구

- Google Analytics 4
- Google Tag Manager
- Hotjar (사용자 행동 분석)

## 7. 개발 일정

### Phase 1: 기반 구축 (4주)

- 개발 환경 구축
- 데이터베이스 설계 및 구축
- 인증 시스템 구현
- 기본 UI/UX 구현

### Phase 2: 핵심 기능 개발 (8주)

- 회원 관리 시스템
- CMS 구축
- 상담 시스템
- 게시판 시스템

### Phase 3: 부가 기능 개발 (6주)

- 후원 관리 시스템
- 교육 및 자료실
- 소셜 로그인
- 결제 시스템 연동

### Phase 4: 최적화 및 배포 (4주)

- 성능 최적화
- 보안 점검
- 테스트 및 버그 수정
- 배포 및 모니터링

## 8. 리스크 관리

### 8.1 기술적 리스크

- 대용량 파일 업로드/다운로드 처리
- 동시 접속자 증가 시 성능 저하
- 보안 취약점

### 8.2 운영적 리스크

- 개인정보 보호법 준수
- 기부금 영수증 발급 규정
- 콘텐츠 저작권 관리
- 시스템 장애 대응

## 9. 성공 지표 (KPI)

### 9.1 사용자 지표

- 월간 활성 사용자(MAU): 10,000명
- 회원 가입 전환율: 5%
- 평균 체류 시간: 5분

### 9.2 비즈니스 지표

- 상담 신청 건수: 월 100건
- 후원자 증가율: 분기 10%
- 콘텐츠 조회수: 월 50,000회

### 9.3 기술 지표

- 가용성: 99.9%
- 평균 응답 시간: 500ms 이하
- 에러율: 0.1% 이하
